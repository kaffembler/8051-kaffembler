RST EQU P3.0
CLK EQU P3.1
DQ  EQU P3.2


SETB CLK

; Reset Thermometer
CLR RST
NOP
SETB RST

; Request Temperature (AAh = 10101010b)
CALL SEND_0
CALL SEND_1
CALL SEND_0
CALL SEND_1
CALL SEND_0
CALL SEND_1
CALL SEND_0
CALL SEND_1

; ==================

CALL CLOCK
CALL CLOCK
CALL CLOCK
CALL CLOCK
CALL CLOCK
CALL CLOCK
CALL CLOCK
CALL CLOCK

SEND_1:
  CLR CLK
  NOP
  SETB DQ
  NOP
  SETB CLK
  NOP
  RET

SEND_0:
  CLR CLK
  NOP
  CLR DQ
  NOP
  SETB CLK
  NOP
  RET

CLOCK:
  CLR CLK
  NOP
  SETB CLK
  JBC DQ, SET_CARRY
  RLC A
  RET

SET_CARRY:
  SETB C
  RLC A
  RET